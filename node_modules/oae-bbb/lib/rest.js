
var OAE = require('oae-util/lib/oae');
var MeetingAPI = require('./api');


OAE.tenantRouter.on('post', '/api/meeting/create', function(req, res) {
	
    	MeetingAPI.createMeeting(req.body.displayName, req.body.description,req.body.welcomemessage, function(err, meeting) {
     		
		if (err) {
			return res.send(err.code, err.msg);
        	}
		res.send(200);
    	});
	
});


OAE.tenantRouter.on('get', '/api/meeting', function(req, res) {
	MeetingAPI.getMeetings(function(err,data){
		if(err){
			return res.send(err.code, err.msg);
		}
		return res.send(200,data);
	});

});


OAE.tenantRouter.on('post', '/api/create', function(req, res) {
	
	MeetingAPI.createBBBCall(req.body.meetingID, req.body.name, function(err,data){
		if(err){
			return res.send(404, "fail");
		}
		return res.send(200,data);
	});

});